{"version":3,"sources":["qr-scanner.js"],"names":["QrScanner","video","onDecode","canvasSize","DEFAULT_CANVAS_SIZE","$video","$canvas","document","createElement","_onDecode","_active","_paused","width","height","_sourceRect","x","y","addEventListener","_updateSourceRect","play","_scanFrame","_qrWorker","Worker","WORKER_PATH","hidden","pause","start","smallestDimension","Math","min","videoWidth","videoHeight","sourceRectSize","round","paused","ended","requestAnimationFrame","scanImage","then","error","console","facingMode","exact","constraintsToTry","forEach","constraint","_getMatchingCameraStream","length","Promise","reject","navigator","mediaDevices","getUserMedia","shift","catch","resolve","window","location","protocol","warn","clearTimeout","_offTimeout","srcObject","_getCameraStream","stream","_setVideoMirror","e","setTimeout","track","getTracks","stop","scaleFactor","style","transform","red","green","blue","postMessage","type","data","inversionMode","imageOrFileOrUrl","sourceRect","worker","canvas","fixedCanvasSize","alsoTryWithoutSourceRect","promise","timeout","onMessage","onError","event","removeEventListener","errorMessage","message","_loadImage","image","imageData","_getImageData","buffer","sourceRectX","sourceRectY","sourceRectWidth","sourceRectHeight","context","getContext","alpha","imageSmoothingEnabled","drawImage","getImageData","HTMLCanvasElement","HTMLVideoElement","ImageBitmap","OffscreenCanvas","Image","_awaitImageLoad","File","URL","src","createObjectURL","revokeObjectURL","complete","naturalWidth","onLoad"],"mappings":"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","file":"qr-scanner.min.js","sourcesContent":[]}