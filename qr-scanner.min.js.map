{"version":3,"sources":["qr-scanner.js"],"names":["QrScanner","video","onDecode","canvasSize","DEFAULT_CANVAS_SIZE","$video","$canvas","document","createElement","_onDecode","_active","_paused","width","height","_sourceRect","x","y","_onCanPlay","bind","_onPlay","_onVisibilityChange","addEventListener","_qrWorker","Worker","WORKER_PATH","removeEventListener","stop","postMessage","type","Promise","resolve","window","location","protocol","console","warn","hidden","clearTimeout","_offTimeout","srcObject","play","facingMode","_getCameraStream","catch","then","stream","_setVideoMirror","e","pause","setTimeout","track","getTracks","imageOrFileOrUrl","sourceRect","worker","canvas","fixedCanvasSize","alsoTryWithoutSourceRect","promise","reject","data","timeout","onMessage","onError","event","errorMessage","message","_loadImage","image","imageData","_getImageData","buffer","scanImage","red","green","blue","inversionMode","_updateSourceRect","_scanFrame","start","smallestDimension","Math","min","videoWidth","videoHeight","sourceRectSize","round","paused","ended","requestAnimationFrame","error","exact","constraintsToTry","forEach","constraint","_getMatchingCameraStream","length","navigator","mediaDevices","getUserMedia","shift","scaleFactor","style","transform","sourceRectX","sourceRectY","sourceRectWidth","sourceRectHeight","context","getContext","alpha","imageSmoothingEnabled","drawImage","getImageData","HTMLCanvasElement","HTMLVideoElement","ImageBitmap","OffscreenCanvas","Image","_awaitImageLoad","File","URL","src","createObjectURL","revokeObjectURL","complete","naturalWidth","onLoad"],"mappings":"A;;aAAA,cAAe,MAAMA,UAAN,CACX,WAAW,CAACC,KAAD,CAAQC,QAAR,CAAkBC,UAAA,CAAaH,SAAAI,oBAA/B,CAA8D,CACrE,IAAAC,OAAA,CAAcJ,KACd,KAAAK,QAAA,CAAeC,QAAAC,cAAA,CAAuB,QAAvB,CACf,KAAAC,UAAA,CAAiBP,QACjB,KAAAQ,QAAA,CAAe,KACf,KAAAC,QAAA,CAAe,KAEf,KAAAL,QAAAM,MAAA,CAAqBT,UACrB,KAAAG,QAAAO,OAAA,CAAsBV,UACtB,KAAAW,YAAA,CAAmB,CACfC,EAAG,CADY,CAEfC,EAAG,CAFY,CAGfJ,MAAOT,UAHQ,CAIfU,OAAQV,UAJO,CAOnB,KAAAc,WAAA,CAAkB,IAAAA,WAAAC,KAAA,CAAqB,IAArB,CAClB,KAAAC,QAAA,CAAe,IAAAA,QAAAD,KAAA,CAAkB,IAAlB,CACf,KAAAE,oBAAA,CAA2B,IAAAA,oBAAAF,KAAA,CAA8B,IAA9B,CAE3B;IAAAb,OAAAgB,iBAAA,CAA6B,SAA7B,CAAwC,IAAAJ,WAAxC,CACA,KAAAZ,OAAAgB,iBAAA,CAA6B,MAA7B,CAAqC,IAAAF,QAArC,CACAZ,SAAAc,iBAAA,CAA0B,kBAA1B,CAA8C,IAAAD,oBAA9C,CAEA,KAAAE,UAAA,CAAiB,IAAIC,MAAJ,CAAWvB,SAAAwB,YAAX,CAxBoD,CA2BzE,OAAO,EAAG,CACN,IAAAnB,OAAAoB,oBAAA,CAAgC,SAAhC,CAA2C,IAAAR,WAA3C,CACA,KAAAZ,OAAAoB,oBAAA,CAAgC,MAAhC,CAAwC,IAAAN,QAAxC,CACAZ,SAAAkB,oBAAA,CAA6B,kBAA7B,CAAiD,IAAAL,oBAAjD,CAEA,KAAAM,KAAA,EACA,KAAAJ,UAAAK,YAAA,CAA2B,CACvBC,KAAM,OADiB,CAA3B,CANM,CAYV,KAAK,EAAG,CACJ,GAAI,IAAAlB,QAAJ;AAAoB,CAAC,IAAAC,QAArB,CACI,MAAOkB,QAAAC,QAAA,EAEX,IAAIC,MAAAC,SAAAC,SAAJ,GAAiC,QAAjC,CAEIC,OAAAC,KAAA,CAAa,4EAAb,CAEJ,KAAAzB,QAAA,CAAe,IACf,KAAAC,QAAA,CAAe,KACf,IAAIJ,QAAA6B,OAAJ,CAEI,MAAOP,QAAAC,QAAA,EAEXO,aAAA,CAAa,IAAAC,YAAb,CACA,KAAAA,YAAA,CAAmB,IACnB,IAAI,IAAAjC,OAAAkC,UAAJ,CAA2B,CAEvB,IAAAlC,OAAAmC,KAAA,EACA,OAAOX,QAAAC,QAAA,EAHgB,CAM3B,IAAIW,WAAa,aACjB,OAAO,KAAAC,iBAAA,CAAsB,aAAtB,CAAqC,IAArC,CAAAC,MAAA,CACI,EAAA,EAAM,CAETF,UAAA,CAAa,MACb,OAAO,KAAAC,iBAAA,EAHE,CADV,CAAAE,KAAA,CAMG,CAAAC,MAAA,CAAA;AAAU,CACZ,IAAAxC,OAAAkC,UAAA,CAAwBM,MACxB,KAAAC,gBAAA,CAAqBL,UAArB,CAFY,CANb,CAAAE,MAAA,CAUI,CAAAI,CAAA,CAAA,EAAK,CACR,IAAArC,QAAA,CAAe,KACf,MAAMqC,EAAN,CAFQ,CAVT,CAvBH,CAuCR,IAAI,EAAG,CACH,IAAAC,MAAA,EACA,KAAAtC,QAAA,CAAe,KAFZ,CAKP,KAAK,EAAG,CACJ,IAAAC,QAAA,CAAe,IACf,IAAI,CAAC,IAAAD,QAAL,CACI,MAEJ,KAAAL,OAAA2C,MAAA,EACA,IAAI,IAAAV,YAAJ,CACI,MAEJ,KAAAA,YAAA,CAAmBW,UAAA,CAAW,EAAA,EAAM,CAChC,MAAMC,MAAQ,IAAA7C,OAAAkC,UAARW,EAAiC,IAAA7C,OAAAkC,UAAAY,UAAA,EAAA,CAAkC,CAAlC,CACvC,IAAI,CAACD,KAAL,CAAY,MACZA,MAAAxB,KAAA,EACA,KAAArB,OAAAkC,UAAA,CAAwB,IACxB,KAAAD,YAAA,CAAmB,IALa,CAAjB,CAMhB,GANgB,CATf,CAmBR,gBAAgB,CAACc,gBAAD,CAAmBC,UAAA,CAAW,IAA9B,CAAoCC,MAAA,CAAO,IAA3C,CAAiDC,MAAA;AAAO,IAAxD,CAA8DC,eAAA,CAAgB,KAA9E,CACCC,wBAAA,CAAyB,KAD1B,CACiC,CAC7C,MAAMC,QAAU,IAAI7B,OAAJ,CAAY,CAACC,OAAD,CAAU6B,MAAV,CAAA,EAAqB,CAC7C,GAAI,CAACL,MAAL,CAAa,CACTA,MAAA,CAAS,IAAI/B,MAAJ,CAAWvB,SAAAwB,YAAX,CACT8B,OAAA3B,YAAA,CAAmB,CAAEC,KAAM,eAAR,CAAyBgC,KAAM,MAA/B,CAAnB,CAFS,CAIb,IAAIC,OAAJ,CAAaC,SAAb,CAAwBC,OACxBD,UAAA,CAAY,CAAAE,KAAA,CAAAF,EAAS,CACjB,GAAIE,KAAAJ,KAAAhC,KAAJ,GAAwB,UAAxB,CACI,MAEJ0B,OAAA7B,oBAAA,CAA2B,SAA3B,CAAsCqC,SAAtC,CACAR,OAAA7B,oBAAA,CAA2B,OAA3B,CAAoCsC,OAApC,CACA1B,aAAA,CAAawB,OAAb,CACA,IAAIG,KAAAJ,KAAAA,KAAJ,GAAwB,IAAxB,CACI9B,OAAA,CAAQkC,KAAAJ,KAAAA,KAAR,CADJ,KAGID,OAAA,CAAO,oBAAP,CAVa,CAarBI;OAAA,CAAU,CAAChB,CAAD,CAAAgB,EAAO,CACbT,MAAA7B,oBAAA,CAA2B,SAA3B,CAAsCqC,SAAtC,CACAR,OAAA7B,oBAAA,CAA2B,OAA3B,CAAoCsC,OAApC,CACA1B,aAAA,CAAawB,OAAb,CACA,KAAII,aAAe,CAAClB,CAAD,CAAK,eAAL,CAAwBA,CAAAmB,QAAxB,EAAqCnB,CACxDY,OAAA,CAAO,iBAAP,CAA2BM,YAA3B,CALa,CAOjBX,OAAAjC,iBAAA,CAAwB,SAAxB,CAAmCyC,SAAnC,CACAR,OAAAjC,iBAAA,CAAwB,OAAxB,CAAiC0C,OAAjC,CACAF,QAAA,CAAUZ,UAAA,CAAW,EAAA,EAAMc,OAAA,CAAQ,SAAR,CAAjB,CAAqC,GAArC,CACV/D,UAAAmE,WAAA,CAAqBf,gBAArB,CAAAR,KAAA,CAA4C,CAAAwB,KAAA,CAAA,EAAS,CACjD,MAAMC,UAAYrE,SAAAsE,cAAA,CAAwBF,KAAxB,CAA+Bf,UAA/B,CAA2CE,MAA3C,CAAmDC,eAAnD,CAClBF,OAAA3B,YAAA,CAAmB,CACfC,KAAM,QADS;AAEfgC,KAAMS,SAFS,CAAnB,CAGG,CAACA,SAAAT,KAAAW,OAAD,CAHH,CAFiD,CAArD,CAAA5B,MAAA,CAMSgB,MANT,CA7B6C,CAAjC,CAsChB,IAAIN,UAAJ,EAAkBI,wBAAlB,CACI,MAAOC,QAAAf,MAAA,CAAc,EAAA,EAAM3C,SAAAwE,UAAA,CAAoBpB,gBAApB,CAAsC,IAAtC,CAA4CE,MAA5C,CAAoDC,MAApD,CAA4DC,eAA5D,CAApB,CADX,KAGI,OAAOE,QA1CkC,CA8CjD,mBAAmB,CAACe,GAAD,CAAMC,KAAN,CAAaC,IAAb,CAAmB,CAClC,IAAArD,UAAAK,YAAA,CAA2B,CACvBC,KAAM,kBADiB,CAEvBgC,KAAM,CAAEa,GAAF,CAAOC,KAAP,CAAcC,IAAd,CAFiB,CAA3B,CADkC,CAOtC,gBAAgB,CAACC,aAAD,CAAgB,CAC5B,IAAAtD,UAAAK,YAAA,CAA2B,CACvBC,KAAM,eADiB,CAEvBgC,KAAMgB,aAFiB,CAA3B,CAD4B,CAOhC,UAAU,EAAG,CACT,IAAAC,kBAAA,EACA,KAAAxE,OAAAmC,KAAA,EAFS,CAKb,OAAO,EAAG,CACN,IAAAqC,kBAAA,EACA;IAAAC,WAAA,EAFM,CAKV,mBAAmB,EAAG,CAClB,GAAIvE,QAAA6B,OAAJ,CACI,IAAAY,MAAA,EADJ,KAEO,IAAI,IAAAtC,QAAJ,CACH,IAAAqE,MAAA,EAJc,CAQtB,iBAAiB,EAAG,CAChB,MAAMC,kBAAoBC,IAAAC,IAAA,CAAS,IAAA7E,OAAA8E,WAAT,CAAiC,IAAA9E,OAAA+E,YAAjC,CAC1B,OAAMC,eAAiBJ,IAAAK,MAAA,CAAW,CAAX,CAAe,CAAf,CAAmBN,iBAAnB,CACvB,KAAAlE,YAAAF,MAAA,CAAyB,IAAAE,YAAAD,OAAzB,CAAmDwE,cACnD,KAAAvE,YAAAC,EAAA,EAAsB,IAAAV,OAAA8E,WAAtB,CAA+CE,cAA/C,EAAiE,CACjE,KAAAvE,YAAAE,EAAA,EAAsB,IAAAX,OAAA+E,YAAtB,CAAgDC,cAAhD,EAAkE,CALlD,CAQpB,UAAU,EAAG,CACT,GAAI,CAAC,IAAA3E,QAAL,EAAqB,IAAAL,OAAAkF,OAArB,EAA2C,IAAAlF,OAAAmF,MAA3C,CAA8D,MAAO,MAErEC;qBAAA,CAAsB,EAAA,EAAM,CACxBzF,SAAAwE,UAAA,CAAoB,IAAAnE,OAApB,CAAiC,IAAAS,YAAjC,CAAmD,IAAAQ,UAAnD,CAAmE,IAAAhB,QAAnE,CAAiF,IAAjF,CAAAsC,KAAA,CACU,IAAAnC,UADV,CAC0B,CAAAiF,KAAA,CAAA,EAAS,CAC3B,GAAI,IAAAhF,QAAJ,EAAoBgF,KAApB,GAA8B,oBAA9B,CACIxD,OAAAwD,MAAA,CAAcA,KAAd,CAFuB,CADnC,CAAA9C,KAAA,CAMU,EAAA,EAAM,IAAAkC,WAAA,EANhB,CADwB,CAA5B,CAHS,CAcb,gBAAgB,CAACrC,UAAD,CAAakD,KAAA,CAAQ,KAArB,CAA4B,CACxC,MAAMC,iBAAmB,CAAC,CACtBhF,MAAO,CAAEsE,IAAK,IAAP,CADe,CAAD,CAEtB,CACCtE,MAAO,CAAEsE,IAAK,GAAP,CADR,CAFsB,CAItB,EAJsB,CAMzB,IAAIzC,UAAJ,CAAgB,CACZ,GAAIkD,KAAJ,CACIlD,UAAA,CAAa,CAAEkD,MAAOlD,UAAT,CAEjBmD,iBAAAC,QAAA,CAAyB,CAAAC,UAAA,CAAA,EAAcA,UAAArD,WAAd,CAAsCA,UAA/D,CAJY,CAMhB,MAAO,KAAAsD,yBAAA,CAA8BH,gBAA9B,CAbiC,CAgB5C,wBAAwB,CAACA,gBAAD,CAAmB,CACvC,GAAIA,gBAAAI,OAAJ;AAAgC,CAAhC,CACI,MAAOnE,QAAA8B,OAAA,CAAe,mBAAf,CAEX,OAAOsC,UAAAC,aAAAC,aAAA,CAAoC,CACvClG,MAAO2F,gBAAAQ,MAAA,EADgC,CAApC,CAAAzD,MAAA,CAEE,EAAA,EAAM,IAAAoD,yBAAA,CAA8BH,gBAA9B,CAFR,CAJgC,CAS3C,eAAe,CAACnD,UAAD,CAAa,CAExB,MAAM4D,YAAc5D,UAAA,GAAa,MAAb,CAAsB,EAAtB,CAA0B,CAC9C,KAAApC,OAAAiG,MAAAC,UAAA,CAA8B,SAA9B,CAA0CF,WAA1C,CAAwD,GAHhC,CAO5B,oBAAoB,CAACjC,KAAD,CAAQf,UAAA,CAAW,IAAnB,CAAyBE,MAAA,CAAO,IAAhC,CAAsCC,eAAA,CAAgB,KAAtD,CAA6D,CAC7ED,MAAA,CAASA,MAAT,EAAmBhD,QAAAC,cAAA,CAAuB,QAAvB,CACnB,OAAMgG,YAAcnD,UAAA,EAAcA,UAAAtC,EAAd,CAA4BsC,UAAAtC,EAA5B,CAA2C,CAC/D,OAAM0F;AAAcpD,UAAA,EAAcA,UAAArC,EAAd,CAA4BqC,UAAArC,EAA5B,CAA2C,CAC/D,OAAM0F,gBAAkBrD,UAAA,EAAcA,UAAAzC,MAAd,CAAgCyC,UAAAzC,MAAhC,CAAmDwD,KAAAxD,MAAnD,EAAkEwD,KAAAe,WAC1F,OAAMwB,iBAAmBtD,UAAA,EAAcA,UAAAxC,OAAd,CAAiCwC,UAAAxC,OAAjC,CAAqDuD,KAAAvD,OAArD,EAAqEuD,KAAAgB,YAC9F,IAAI,CAAC5B,eAAL,GAAyBD,MAAA3C,MAAzB,GAA0C8F,eAA1C,EAA6DnD,MAAA1C,OAA7D,GAA+E8F,gBAA/E,EAAkG,CAC9FpD,MAAA3C,MAAA,CAAe8F,eACfnD,OAAA1C,OAAA,CAAgB8F,gBAF8E,CAIlG,MAAMC,QAAUrD,MAAAsD,WAAA,CAAkB,IAAlB,CAAwB,CAAEC,MAAO,KAAT,CAAxB,CAChBF,QAAAG,sBAAA,CAAgC,KAChCH,QAAAI,UAAA,CAAkB5C,KAAlB;AAAyBoC,WAAzB,CAAsCC,WAAtC,CAAmDC,eAAnD,CAAoEC,gBAApE,CAAsF,CAAtF,CAAyF,CAAzF,CAA4FpD,MAAA3C,MAA5F,CAA0G2C,MAAA1C,OAA1G,CACA,OAAO+F,QAAAK,aAAA,CAAqB,CAArB,CAAwB,CAAxB,CAA2B1D,MAAA3C,MAA3B,CAAyC2C,MAAA1C,OAAzC,CAbsE,CAiBjF,iBAAiB,CAACuC,gBAAD,CAAmB,CAChC,GAAIA,gBAAJ,WAAgC8D,kBAAhC,EAAqD9D,gBAArD,WAAiF+D,iBAAjF,EACOpF,MAAAqF,YADP,EAC6BhE,gBAD7B,WACyDrB,OAAAqF,YADzD,EAEOrF,MAAAsF,gBAFP,EAEiCjE,gBAFjC,WAE6DrB,OAAAsF,gBAF7D,CAGI,MAAOxF,QAAAC,QAAA,CAAgBsB,gBAAhB,CAHX,KAIO,IAAIA,gBAAJ,WAAgCkE,MAAhC,CACH,MAAOtH,UAAAuH,gBAAA,CAA0BnE,gBAA1B,CAAAR,KAAA,CAAiD,EAAA;AAAMQ,gBAAvD,CADJ,KAEA,IAAIA,gBAAJ,WAAgCoE,KAAhC,EAAwCpE,gBAAxC,WAAoEqE,IAApE,EACC,MAAOrE,iBADR,GAC4B,QAD5B,CACsC,CACzC,MAAMgB,MAAQ,IAAIkD,KAClB,IAAIlE,gBAAJ,WAAgCoE,KAAhC,CACIpD,KAAAsD,IAAA,CAAYD,GAAAE,gBAAA,CAAoBvE,gBAApB,CADhB,KAGIgB,MAAAsD,IAAA,CAAYtE,gBAEhB,OAAOpD,UAAAuH,gBAAA,CAA0BnD,KAA1B,CAAAxB,KAAA,CAAsC,EAAA,EAAM,CAC/C,GAAIQ,gBAAJ,WAAgCoE,KAAhC,CACIC,GAAAG,gBAAA,CAAoBxD,KAAAsD,IAApB,CAEJ,OAAOtD,MAJwC,CAA5C,CAPkC,CADtC,IAeH,OAAOvC,QAAA8B,OAAA,CAAe,yBAAf,CAtBqB,CA2BpC,sBAAsB,CAACS,KAAD,CAAQ,CAC1B,MAAO,KAAIvC,OAAJ,CAAY,CAACC,OAAD;AAAU6B,MAAV,CAAA,EAAqB,CACpC,GAAIS,KAAAyD,SAAJ,EAAsBzD,KAAA0D,aAAtB,GAA2C,CAA3C,CAEIhG,OAAA,EAFJ,KAGO,CACH,IAAIiG,MAAJ,CAAYhE,OACZgE,OAAA,CAAS,EAAAA,EAAM,CACX3D,KAAA3C,oBAAA,CAA0B,MAA1B,CAAkCsG,MAAlC,CACA3D,MAAA3C,oBAAA,CAA0B,OAA1B,CAAmCsC,OAAnC,CACAjC,QAAA,EAHW,CAKfiC,QAAA,CAAU,EAAAA,EAAM,CACZK,KAAA3C,oBAAA,CAA0B,MAA1B,CAAkCsG,MAAlC,CACA3D,MAAA3C,oBAAA,CAA0B,OAA1B,CAAmCsC,OAAnC,CACAJ,OAAA,CAAO,kBAAP,CAHY,CAKhBS,MAAA/C,iBAAA,CAAuB,MAAvB,CAA+B0G,MAA/B,CACA3D,MAAA/C,iBAAA,CAAuB,OAAvB,CAAgC0C,OAAhC,CAbG,CAJ6B,CAAjC,CADmB,CAxRnB,CA+Sf/D,SAAAI,oBAAA,CAAgC,GAChCJ,UAAAwB,YAAA,CAAwB","file":"qr-scanner.min.js","sourcesContent":[]}