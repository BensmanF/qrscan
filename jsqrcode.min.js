"use strict";var _slicedToArray=function(){function d(l,c){var f=[],u=!0,h=!1,g=void 0;try{for(var _,m=l[Symbol.iterator]();!(u=(_=m.next()).done)&&(f.push(_.value),!(c&&f.length===c));u=!0);}catch(C){h=!0,g=C}finally{try{!u&&m["return"]&&m["return"]()}finally{if(h)throw g}}return f}return function(l,c){if(Array.isArray(l))return l;if(Symbol.iterator in Object(l))return d(l,c);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_createClass=function(){function d(l,c){for(var u,f=0;f<c.length;f++)u=c[f],u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(l,u.key,u)}return function(l,c,f){return c&&d(l.prototype,c),f&&d(l,f),l}}();function _classCallCheck(d,l){if(!(d instanceof l))throw new TypeError("Cannot call a class as a function")}(function(){function d(fe,ue){this.count=fe,this.dataCodewords=ue,this.__defineGetter__("Count",function(){return this.count}),this.__defineGetter__("DataCodewords",function(){return this.dataCodewords})}function l(fe,ue,he){this.ecCodewordsPerBlock=fe,this.ecBlocks=he?[ue,he]:Array(ue),this.__defineGetter__("ECCodewordsPerBlock",function(){return this.ecCodewordsPerBlock}),this.__defineGetter__("TotalECCodewords",function(){return this.ecCodewordsPerBlock*this.NumBlocks}),this.__defineGetter__("NumBlocks",function(){for(var ge=0,me=0;me<this.ecBlocks.length;me++)ge+=this.ecBlocks[me].length;return ge}),this.getECBlocks=function(){return this.ecBlocks}}function c(fe,ue,he,ge,me,be){this.versionNumber=fe,this.alignmentPatternCenters=ue,this.ecBlocks=[he,ge,me,be];for(var Be,Ce=0,pe=he.ECCodewordsPerBlock,ke=he.getECBlocks(),we=0;we<ke.length;we++)Be=ke[we],Ce+=Be.Count*(Be.DataCodewords+pe);this.totalCodewords=Ce,this.__defineGetter__("VersionNumber",function(){return this.versionNumber}),this.__defineGetter__("AlignmentPatternCenters",function(){return this.alignmentPatternCenters}),this.__defineGetter__("TotalCodewords",function(){return this.totalCodewords}),this.__defineGetter__("DimensionForVersion",function(){return 17+4*this.versionNumber}),this.buildFunctionPattern=function(){var Se=this.DimensionForVersion,Pe=new C(Se);Pe.setRegion(0,0,9,9),Pe.setRegion(Se-8,0,8,9),Pe.setRegion(0,Se-8,9,8);for(var xe,ye=this.alignmentPatternCenters.length,Ee=0;Ee<ye;Ee++){xe=this.alignmentPatternCenters[Ee]-2;for(var Me=0;Me<ye;Me++)(0!=Ee||0!=Me&&Me!=ye-1)&&(Ee!=ye-1||0!=Me)&&Pe.setRegion(this.alignmentPatternCenters[Me]-2,xe,5,5)}return Pe.setRegion(6,9,1,Se-17),Pe.setRegion(9,6,Se-17,1),6<this.versionNumber&&(Pe.setRegion(Se-11,0,3,6),Pe.setRegion(0,Se-11,6,3)),Pe},this.getECBlocksForLevel=function(Se){return this.ecBlocks[Se.ordinal()]}}function u(fe,ue,he,ge,me,be,Ce,pe,ke){this.a11=fe,this.a12=ge,this.a13=Ce,this.a21=ue,this.a22=me,this.a23=pe,this.a31=he,this.a32=be,this.a33=ke,this.transformPoints1=function(we){for(var Be=we.length,Se=this.a11,Pe=this.a12,ye=this.a13,Ee=this.a21,xe=this.a22,Me=this.a23,De=this.a31,Ie=this.a32,Fe=this.a33,Ne=0;Ne<Be;Ne+=2){var Re=we[Ne],Ge=we[Ne+1],Ae=ye*Re+Me*Ge+Fe;we[Ne]=(Se*Re+Ee*Ge+De)/Ae,we[Ne+1]=(Pe*Re+xe*Ge+Ie)/Ae}},this.transformPoints2=function(we,Be){for(var Se=we.length,Pe=0;Pe<Se;Pe++){var ye=we[Pe],Ee=Be[Pe],xe=this.a13*ye+this.a23*Ee+this.a33;we[Pe]=(this.a11*ye+this.a21*Ee+this.a31)/xe,Be[Pe]=(this.a12*ye+this.a22*Ee+this.a32)/xe}},this.buildAdjoint=function(){return new u(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)},this.times=function(we){return new u(this.a11*we.a11+this.a21*we.a12+this.a31*we.a13,this.a11*we.a21+this.a21*we.a22+this.a31*we.a23,this.a11*we.a31+this.a21*we.a32+this.a31*we.a33,this.a12*we.a11+this.a22*we.a12+this.a32*we.a13,this.a12*we.a21+this.a22*we.a22+this.a32*we.a23,this.a12*we.a31+this.a22*we.a32+this.a32*we.a33,this.a13*we.a11+this.a23*we.a12+this.a33*we.a13,this.a13*we.a21+this.a23*we.a22+this.a33*we.a23,this.a13*we.a31+this.a23*we.a32+this.a33*we.a33)}}function h(fe,ue){this.bits=fe,this.points=ue}function g(fe){this.image=fe,this.resultPointCallback=null,this.sizeOfBlackWhiteBlackRun=function(ue,he,ge,me){var be=Math.abs(me-he)>Math.abs(ge-ue);if(be){var Ce=ue;ue=he,he=Ce,Ce=ge,ge=me,me=Ce}for(var pe=Math.abs(ge-ue),ke=Math.abs(me-he),we=-pe>>1,Be=he<me?1:-1,Se=ue<ge?1:-1,Pe=0,ye=ue,Ee=he;ye!=ge;ye+=Se){var xe=be?Ee:ye,Me=be?ye:Ee;if(1==Pe?this.image[xe+Me*ae.width]&&Pe++:!this.image[xe+Me*ae.width]&&Pe++,3==Pe){var De=ye-ue,Ie=Ee-he;return Math.sqrt(De*De+Ie*Ie)}if(we+=ke,0<we){if(Ee==me)break;Ee+=Be,we-=pe}}var Fe=ge-ue,Ne=me-he;return Math.sqrt(Fe*Fe+Ne*Ne)},this.sizeOfBlackWhiteBlackRunBothWays=function(ue,he,ge,me){var be=this.sizeOfBlackWhiteBlackRun(ue,he,ge,me),Ce=1,pe=ue-(ge-ue);0>pe?(Ce=ue/(ue-pe),pe=0):pe>=ae.width&&(Ce=(ae.width-1-ue)/(pe-ue),pe=ae.width-1);var ke=Math.floor(he-(me-he)*Ce);return Ce=1,0>ke?(Ce=he/(he-ke),ke=0):ke>=ae.height&&(Ce=(ae.height-1-he)/(ke-he),ke=ae.height-1),pe=Math.floor(ue+(pe-ue)*Ce),be+=this.sizeOfBlackWhiteBlackRun(ue,he,pe,ke),be-1},this.calculateModuleSizeOneWay=function(ue,he){var ge=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(ue.X),Math.floor(ue.Y),Math.floor(he.X),Math.floor(he.Y)),me=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(he.X),Math.floor(he.Y),Math.floor(ue.X),Math.floor(ue.Y));return isNaN(ge)?me/7:isNaN(me)?ge/7:(ge+me)/14},this.calculateModuleSize=function(ue,he,ge){return(this.calculateModuleSizeOneWay(ue,he)+this.calculateModuleSizeOneWay(ue,ge))/2},this.distance=function(ue,he){var ge=ue.X-he.X,me=ue.Y-he.Y;return Math.sqrt(ge*ge+me*me)},this.computeDimension=function(ue,he,ge,me){var be=Math.round(this.distance(ue,he)/me),Ce=Math.round(this.distance(ue,ge)/me),pe=(be+Ce>>1)+7;switch(3&pe){case 0:pe++;break;case 2:pe--;break;case 3:throw"Error";}return pe},this.findAlignmentInRegion=function(ue,he,ge,me){var be=Math.floor(me*ue),Ce=Math.max(0,he-be),pe=Math.min(ae.width-1,he+be);if(pe-Ce<3*ue)throw"Error";var ke=Math.max(0,ge-be),we=Math.min(ae.height-1,ge+be),Be=new Y(this.image,Ce,ke,pe-Ce,we-ke,ue,this.resultPointCallback);return Be.find()},this.createTransform=function(ue,he,ge,me,be){var Ce=be-3.5,pe,ke,we,Be;null==me?(pe=he.X-ue.X+ge.X,ke=he.Y-ue.Y+ge.Y,we=Be=Ce):(pe=me.X,ke=me.Y,we=Be=Ce-3);var Se=u.quadrilateralToQuadrilateral(3.5,3.5,Ce,3.5,we,Be,3.5,Ce,ue.X,ue.Y,he.X,he.Y,pe,ke,ge.X,ge.Y);return Se},this.sampleGrid=function(ue,he,ge){return Z.sampleGrid3(ue,ge,he)},this.processFinderPatternInfo=function(ue){var he=ue.TopLeft,ge=ue.TopRight,me=ue.BottomLeft,be=this.calculateModuleSize(he,ge,me);if(1>be)throw"Error";var Ce=this.computeDimension(he,ge,me,be),pe=c.getProvisionalVersionForDimension(Ce),ke=pe.DimensionForVersion-7,we=null;if(0<pe.AlignmentPatternCenters.length)for(var Be=ge.X-he.X+me.X,Se=ge.Y-he.Y+me.Y,Pe=1-3/ke,ye=Math.floor(he.X+Pe*(Be-he.X)),Ee=Math.floor(he.Y+Pe*(Se-he.Y)),xe=4;16>=xe;xe<<=1){we=this.findAlignmentInRegion(be,ye,Ee,xe);break}var Ie,Me=this.createTransform(he,ge,me,we,Ce),De=this.sampleGrid(this.image,Me,Ce);return Ie=null==we?[me,he,ge]:[me,he,ge,we],new h(De,Ie)},this.detect=function(){var ue=new v().findFinderPattern(this.image);return this.processFinderPatternInfo(ue)}}function m(fe){this.errorCorrectionLevel=_.forBits(3&fe>>3),this.dataMask=7&fe,this.__defineGetter__("ErrorCorrectionLevel",function(){return this.errorCorrectionLevel}),this.__defineGetter__("DataMask",function(){return this.dataMask}),this.GetHashCode=function(){return this.errorCorrectionLevel.ordinal()<<3|this.dataMask},this.Equals=function(ue){var he=ue;return this.errorCorrectionLevel==he.errorCorrectionLevel&&this.dataMask==he.dataMask}}function _(fe,ue,he){this.ordinal_Renamed_Field=fe,this.bits=ue,this.name=he,this.__defineGetter__("Bits",function(){return this.bits}),this.__defineGetter__("Name",function(){return this.name}),this.ordinal=function(){return this.ordinal_Renamed_Field}}function C(fe,ue){if(ue||(ue=fe),1>fe||1>ue)throw"Both dimensions must be greater than 0";this.width=fe,this.height=ue;var he=fe>>5;0!=(31&fe)&&he++,this.rowSize=he,this.bits=Array(he*ue);for(var ge=0;ge<this.bits.length;ge++)this.bits[ge]=0;this.__defineGetter__("Width",function(){return this.width}),this.__defineGetter__("Height",function(){return this.height}),this.__defineGetter__("Dimension",function(){if(this.width!=this.height)throw"Can't call getDimension() on a non-square matrix";return this.width}),this.get_Renamed=function(me,be){var Ce=be*this.rowSize+(me>>5);return 0!=(1&O(this.bits[Ce],31&me))},this.set_Renamed=function(me,be){var Ce=be*this.rowSize+(me>>5);this.bits[Ce]|=1<<(31&me)},this.flip=function(me,be){var Ce=be*this.rowSize+(me>>5);this.bits[Ce]^=1<<(31&me)},this.clear=function(){for(var me=this.bits.length,be=0;be<me;be++)this.bits[be]=0},this.setRegion=function(me,be,Ce,pe){if(0>be||0>me)throw"Left and top must be nonnegative";if(1>pe||1>Ce)throw"Height and width must be at least 1";var ke=me+Ce,we=be+pe;if(we>this.height||ke>this.width)throw"The region must fit inside the matrix";for(var Se,Be=be;Be<we;Be++){Se=Be*this.rowSize;for(var Pe=me;Pe<ke;Pe++)this.bits[Se+(Pe>>5)]|=1<<(31&Pe)}}}function p(fe,ue){this.numDataCodewords=fe,this.codewords=ue,this.__defineGetter__("NumDataCodewords",function(){return this.numDataCodewords}),this.__defineGetter__("Codewords",function(){return this.codewords})}function k(fe){var ue=fe.Dimension;if(21>ue||1!=(3&ue))throw"Error BitMatrixParser";this.bitMatrix=fe,this.parsedVersion=null,this.parsedFormatInfo=null,this.copyBit=function(he,ge,me){return this.bitMatrix.get_Renamed(he,ge)?1|me<<1:me<<1},this.readFormatInformation=function(){if(null!=this.parsedFormatInfo)return this.parsedFormatInfo;for(var he=0,ge=0;6>ge;ge++)he=this.copyBit(ge,8,he);he=this.copyBit(7,8,he),he=this.copyBit(8,8,he),he=this.copyBit(8,7,he);for(var me=5;0<=me;me--)he=this.copyBit(8,me,he);if(this.parsedFormatInfo=m.decodeFormatInformation(he),null!=this.parsedFormatInfo)return this.parsedFormatInfo;var be=this.bitMatrix.Dimension;he=0;for(var ge=be-1;ge>=be-8;ge--)he=this.copyBit(ge,8,he);for(var me=be-7;me<be;me++)he=this.copyBit(8,me,he);if(this.parsedFormatInfo=m.decodeFormatInformation(he),null!=this.parsedFormatInfo)return this.parsedFormatInfo;throw"Error readFormatInformation"},this.readVersion=function(){if(null!=this.parsedVersion)return this.parsedVersion;var he=this.bitMatrix.Dimension,ge=he-17>>2;if(6>=ge)return c.getVersionForNumber(ge);for(var me=0,be=he-11,Ce=5;0<=Ce;Ce--)for(var pe=he-9;pe>=be;pe--)me=this.copyBit(pe,Ce,me);if(this.parsedVersion=c.decodeVersionInformation(me),null!=this.parsedVersion&&this.parsedVersion.DimensionForVersion==he)return this.parsedVersion;me=0;for(var pe=5;0<=pe;pe--)for(var Ce=he-9;Ce>=be;Ce--)me=this.copyBit(pe,Ce,me);if(this.parsedVersion=c.decodeVersionInformation(me),null!=this.parsedVersion&&this.parsedVersion.DimensionForVersion==he)return this.parsedVersion;throw"Error readVersion"},this.readCodewords=function(){var he=this.readFormatInformation(),ge=this.readVersion(),me=oe.forReference(he.DataMask),be=this.bitMatrix.Dimension;me.unmaskBitMatrix(this.bitMatrix,be);for(var Ce=ge.buildFunctionPattern(),pe=!0,ke=Array(ge.TotalCodewords),we=0,Be=0,Se=0,Pe=be-1;0<Pe;Pe-=2){6==Pe&&Pe--;for(var Ee,ye=0;ye<be;ye++){Ee=pe?be-1-ye:ye;for(var xe=0;2>xe;xe++)Ce.get_Renamed(Pe-xe,Ee)||(Se++,Be<<=1,this.bitMatrix.get_Renamed(Pe-xe,Ee)&&(Be|=1),8==Se&&(ke[we++]=Be,Se=0,Be=0))}pe^=!0}if(we!=ge.TotalCodewords)throw"Error readCodewords";return ke}}function G(fe,ue){if(null==ue||0==ue.length)throw"System.ArgumentException";this.field=fe;var he=ue.length;if(1<he&&0==ue[0]){for(var ge=1;ge<he&&0==ue[ge];)ge++;if(ge==he)this.coefficients=fe.Zero.coefficients;else{this.coefficients=Array(he-ge);for(var me=0;me<this.coefficients.length;me++)this.coefficients[me]=0;for(var be=0;be<this.coefficients.length;be++)this.coefficients[be]=ue[ge+be]}}else this.coefficients=ue;this.__defineGetter__("Zero",function(){return 0==this.coefficients[0]}),this.__defineGetter__("Degree",function(){return this.coefficients.length-1}),this.__defineGetter__("Coefficients",function(){return this.coefficients}),this.getCoefficient=function(Ce){return this.coefficients[this.coefficients.length-1-Ce]},this.evaluateAt=function(Ce){if(0==Ce)return this.getCoefficient(0);var pe=this.coefficients.length;if(1==Ce){for(var ke=0,we=0;we<pe;we++)ke=A.addOrSubtract(ke,this.coefficients[we]);return ke}for(var Be=this.coefficients[0],we=1;we<pe;we++)Be=A.addOrSubtract(this.field.multiply(Ce,Be),this.coefficients[we]);return Be},this.addOrSubtract=function(Ce){if(this.field!=Ce.field)throw"GF256Polys do not have same GF256 field";if(this.Zero)return Ce;if(Ce.Zero)return this;var pe=this.coefficients,ke=Ce.coefficients;if(pe.length>ke.length){var we=pe;pe=ke,ke=we}for(var Be=Array(ke.length),Se=ke.length-pe.length,Pe=0;Pe<Se;Pe++)Be[Pe]=ke[Pe];for(var ye=Se;ye<ke.length;ye++)Be[ye]=A.addOrSubtract(pe[ye-Se],ke[ye]);return new G(fe,Be)},this.multiply1=function(Ce){if(this.field!=Ce.field)throw"GF256Polys do not have same GF256 field";if(this.Zero||Ce.Zero)return this.field.Zero;for(var ye,pe=this.coefficients,ke=pe.length,we=Ce.coefficients,Be=we.length,Se=Array(ke+Be-1),Pe=0;Pe<ke;Pe++){ye=pe[Pe];for(var Ee=0;Ee<Be;Ee++)Se[Pe+Ee]=A.addOrSubtract(Se[Pe+Ee],this.field.multiply(ye,we[Ee]))}return new G(this.field,Se)},this.multiply2=function(Ce){if(0==Ce)return this.field.Zero;if(1==Ce)return this;for(var pe=this.coefficients.length,ke=Array(pe),we=0;we<pe;we++)ke[we]=this.field.multiply(this.coefficients[we],Ce);return new G(this.field,ke)},this.multiplyByMonomial=function(Ce,pe){if(0>Ce)throw"System.ArgumentException";if(0==pe)return this.field.Zero;for(var ke=this.coefficients.length,we=Array(ke+Ce),Be=0;Be<we.length;Be++)we[Be]=0;for(var Be=0;Be<ke;Be++)we[Be]=this.field.multiply(this.coefficients[Be],pe);return new G(this.field,we)},this.divide=function(Ce){if(this.field!=Ce.field)throw"GF256Polys do not have same GF256 field";if(Ce.Zero)throw"Divide by 0";for(var pe=this.field.Zero,ke=this,we=Ce.getCoefficient(Ce.Degree),Be=this.field.inverse(we);ke.Degree>=Ce.Degree&&!ke.Zero;){var Se=ke.Degree-Ce.Degree,Pe=this.field.multiply(ke.getCoefficient(ke.Degree),Be),ye=Ce.multiplyByMonomial(Se,Pe),Ee=this.field.buildMonomial(Se,Pe);pe=pe.addOrSubtract(Ee),ke=ke.addOrSubtract(ye)}return[pe,ke]}}function A(fe){this.expTable=Array(256),this.logTable=Array(256);for(var ue=1,he=0;256>he;he++)this.expTable[he]=ue,ue<<=1,256<=ue&&(ue^=fe);for(var he=0;255>he;he++)this.logTable[this.expTable[he]]=he;var ge=[,];ge[0]=0,this.zero=new G(this,Array(ge));var me=[,];me[0]=1,this.one=new G(this,Array(me)),this.__defineGetter__("Zero",function(){return this.zero}),this.__defineGetter__("One",function(){return this.one}),this.buildMonomial=function(be,Ce){if(0>be)throw"System.ArgumentException";if(0==Ce)return this.zero;for(var pe=Array(be+1),ke=0;ke<pe.length;ke++)pe[ke]=0;return pe[0]=Ce,new G(this,pe)},this.exp=function(be){return this.expTable[be]},this.log=function(be){if(0==be)throw"System.ArgumentException";return this.logTable[be]},this.inverse=function(be){if(0==be)throw"System.ArithmeticException";return this.expTable[255-this.logTable[be]]},this.multiply=function(be,Ce){return 0==be||0==Ce?0:1==be?Ce:1==Ce?be:this.expTable[(this.logTable[be]+this.logTable[Ce])%255]}}function O(fe,ue){return 0<=fe?fe>>ue:(fe>>ue)+(2<<~ue)}function T(fe,ue,he){this.x=fe,this.y=ue,this.count=1,this.estimatedModuleSize=he,this.__defineGetter__("EstimatedModuleSize",function(){return this.estimatedModuleSize}),this.__defineGetter__("Count",function(){return this.count}),this.__defineGetter__("X",function(){return this.x}),this.__defineGetter__("Y",function(){return this.y}),this.incrementCount=function(){this.count++},this.aboutEquals=function(ge,me,be){if(Math.abs(me-this.y)<=ge&&Math.abs(be-this.x)<=ge){var Ce=Math.abs(ge-this.estimatedModuleSize);return 1>=Ce||1>=Ce/this.estimatedModuleSize}return!1}}function z(fe){this.bottomLeft=fe[0],this.topLeft=fe[1],this.topRight=fe[2],this.__defineGetter__("BottomLeft",function(){return this.bottomLeft}),this.__defineGetter__("TopLeft",function(){return this.topLeft}),this.__defineGetter__("TopRight",function(){return this.topRight})}function v(){this.image=null,this.possibleCenters=[],this.hasSkipped=!1,this.crossCheckStateCount=[0,0,0,0,0],this.resultPointCallback=null,this.__defineGetter__("CrossCheckStateCount",function(){return this.crossCheckStateCount[0]=0,this.crossCheckStateCount[1]=0,this.crossCheckStateCount[2]=0,this.crossCheckStateCount[3]=0,this.crossCheckStateCount[4]=0,this.crossCheckStateCount}),this.foundPatternCross=function(fe){for(var ge,ue=0,he=0;5>he;he++){if(ge=fe[he],0==ge)return!1;ue+=ge}if(7>ue)return!1;var me=Math.floor((ue<<de)/7),be=Math.floor(me/2);return Math.abs(me-(fe[0]<<de))<be&&Math.abs(me-(fe[1]<<de))<be&&Math.abs(3*me-(fe[2]<<de))<3*be&&Math.abs(me-(fe[3]<<de))<be&&Math.abs(me-(fe[4]<<de))<be},this.centerFromEnd=function(fe,ue){return ue-fe[4]-fe[3]-fe[2]/2},this.crossCheckVertical=function(fe,ue,he,ge){for(var me=this.image,be=ae.height,Ce=this.CrossCheckStateCount,pe=fe;0<=pe&&me[ue+pe*ae.width];)Ce[2]++,pe--;if(0>pe)return NaN;for(;0<=pe&&!me[ue+pe*ae.width]&&Ce[1]<=he;)Ce[1]++,pe--;if(0>pe||Ce[1]>he)return NaN;for(;0<=pe&&me[ue+pe*ae.width]&&Ce[0]<=he;)Ce[0]++,pe--;if(Ce[0]>he)return NaN;for(pe=fe+1;pe<be&&me[ue+pe*ae.width];)Ce[2]++,pe++;if(pe==be)return NaN;for(;pe<be&&!me[ue+pe*ae.width]&&Ce[3]<he;)Ce[3]++,pe++;if(pe==be||Ce[3]>=he)return NaN;for(;pe<be&&me[ue+pe*ae.width]&&Ce[4]<he;)Ce[4]++,pe++;if(Ce[4]>=he)return NaN;var ke=Ce[0]+Ce[1]+Ce[2]+Ce[3]+Ce[4];return 5*Math.abs(ke-ge)>=2*ge?NaN:this.foundPatternCross(Ce)?this.centerFromEnd(Ce,pe):NaN},this.crossCheckHorizontal=function(fe,ue,he,ge){for(var me=this.image,be=ae.width,Ce=this.CrossCheckStateCount,pe=fe;0<=pe&&me[pe+ue*ae.width];)Ce[2]++,pe--;if(0>pe)return NaN;for(;0<=pe&&!me[pe+ue*ae.width]&&Ce[1]<=he;)Ce[1]++,pe--;if(0>pe||Ce[1]>he)return NaN;for(;0<=pe&&me[pe+ue*ae.width]&&Ce[0]<=he;)Ce[0]++,pe--;if(Ce[0]>he)return NaN;for(pe=fe+1;pe<be&&me[pe+ue*ae.width];)Ce[2]++,pe++;if(pe==be)return NaN;for(;pe<be&&!me[pe+ue*ae.width]&&Ce[3]<he;)Ce[3]++,pe++;if(pe==be||Ce[3]>=he)return NaN;for(;pe<be&&me[pe+ue*ae.width]&&Ce[4]<he;)Ce[4]++,pe++;if(Ce[4]>=he)return NaN;var ke=Ce[0]+Ce[1]+Ce[2]+Ce[3]+Ce[4];return 5*Math.abs(ke-ge)>=ge?NaN:this.foundPatternCross(Ce)?this.centerFromEnd(Ce,pe):NaN},this.handlePossibleCenter=function(fe,ue,he){var ge=fe[0]+fe[1]+fe[2]+fe[3]+fe[4],me=this.centerFromEnd(fe,he),be=this.crossCheckVertical(ue,Math.floor(me),fe[2],ge);if(!isNaN(be)&&(me=this.crossCheckHorizontal(Math.floor(me),Math.floor(be),fe[2],ge),!isNaN(me))){for(var Be,Ce=ge/7,pe=!1,ke=this.possibleCenters.length,we=0;we<ke;we++)if(Be=this.possibleCenters[we],Be.aboutEquals(Ce,be,me)){Be.incrementCount(),pe=!0;break}if(!pe){var Se=new T(me,be,Ce);this.possibleCenters.push(Se),null!=this.resultPointCallback&&this.resultPointCallback.foundPossibleResultPoint(Se)}return!0}return!1},this.selectBestPatterns=function(){var fe=this.possibleCenters.length;if(3>fe)throw new Error("Couldn't find enough finder patterns (found "+fe+")");if(3<fe){for(var me,ue=0,he=0,ge=0;ge<fe;ge++)me=this.possibleCenters[ge].EstimatedModuleSize,ue+=me,he+=me*me;var be=ue/fe;this.possibleCenters.sort(function(we,Be){var Se=Math.abs(Be.EstimatedModuleSize-be),Pe=Math.abs(we.EstimatedModuleSize-be);return Se<Pe?-1:Se==Pe?0:1});for(var ke,Ce=Math.sqrt(he/fe-be*be),pe=Math.max(0.2*be,Ce),ge=this.possibleCenters.length-1;0<=ge;ge--)ke=this.possibleCenters[ge],Math.abs(ke.EstimatedModuleSize-be)>pe&&this.possibleCenters.splice(ge,1)}return 3<this.possibleCenters.length&&this.possibleCenters.sort(function(we,Be){return we.count>Be.count?-1:we.count<Be.count?1:0}),[this.possibleCenters[0],this.possibleCenters[1],this.possibleCenters[2]]},this.findRowSkip=function(){var fe=this.possibleCenters.length;if(1>=fe)return 0;for(var ge,ue=null,he=0;he<fe;he++)if(ge=this.possibleCenters[he],ge.Count>=le)if(null==ue)ue=ge;else return this.hasSkipped=!0,Math.floor((Math.abs(ue.X-ge.X)-Math.abs(ue.Y-ge.Y))/2);return 0},this.haveMultiplyConfirmedCenters=function(){for(var me,fe=0,ue=0,he=this.possibleCenters.length,ge=0;ge<he;ge++)me=this.possibleCenters[ge],me.Count>=le&&(fe++,ue+=me.EstimatedModuleSize);if(3>fe)return!1;for(var be=ue/he,Ce=0,ge=0;ge<he;ge++)me=this.possibleCenters[ge],Ce+=Math.abs(me.EstimatedModuleSize-be);return Ce<=0.05*ue},this.findFinderPattern=function(fe){this.image=fe;var he=ae.height,ge=ae.width,me=Math.floor(3*he/(4*57));(me<ne||!1)&&(me=ne);for(var be=!1,Ce=[,,,,,],pe=me-1;pe<he&&!be;pe+=me){Ce[0]=0,Ce[1]=0,Ce[2]=0,Ce[3]=0,Ce[4]=0;for(var ke=0,we=0;we<ge;we++)if(fe[we+pe*ae.width])1==(1&ke)&&ke++,Ce[ke]++;else if(0!=(1&ke))Ce[ke]++;else if(4!=ke)Ce[++ke]++;else if(this.foundPatternCross(Ce)){var Be=this.handlePossibleCenter(Ce,pe,we);if(!Be){do we++;while(we<ge&&!fe[we+pe*ae.width]);we--}else if(me=2,this.hasSkipped)be=this.haveMultiplyConfirmedCenters();else{var Se=this.findRowSkip();Se>Ce[2]&&(pe+=Se-Ce[2]-me,we=ge-1)}ke=0,Ce[0]=0,Ce[1]=0,Ce[2]=0,Ce[3]=0,Ce[4]=0}else Ce[0]=Ce[2],Ce[1]=Ce[3],Ce[2]=Ce[4],Ce[3]=1,Ce[4]=0,ke=3;if(this.foundPatternCross(Ce)){var Be=this.handlePossibleCenter(Ce,pe,ge);Be&&(me=Ce[0],this.hasSkipped&&(be=this.haveMultiplyConfirmedCenters()))}}var Pe=this.selectBestPatterns();return ae.orderBestPatterns(Pe),new z(Pe)}}function V(fe,ue,he){this.x=fe,this.y=ue,this.count=1,this.estimatedModuleSize=he,this.__defineGetter__("EstimatedModuleSize",function(){return this.estimatedModuleSize}),this.__defineGetter__("Count",function(){return this.count}),this.__defineGetter__("X",function(){return Math.floor(this.x)}),this.__defineGetter__("Y",function(){return Math.floor(this.y)}),this.incrementCount=function(){this.count++},this.aboutEquals=function(ge,me,be){if(Math.abs(me-this.y)<=ge&&Math.abs(be-this.x)<=ge){var Ce=Math.abs(ge-this.estimatedModuleSize);return 1>=Ce||1>=Ce/this.estimatedModuleSize}return!1}}function Y(fe,ue,he,ge,me,be,Ce){this.image=fe,this.possibleCenters=[],this.startX=ue,this.startY=he,this.width=ge,this.height=me,this.moduleSize=be,this.crossCheckStateCount=[0,0,0],this.resultPointCallback=Ce,this.centerFromEnd=function(pe,ke){return ke-pe[2]-pe[1]/2},this.foundPatternCross=function(pe){for(var ke=this.moduleSize,Be=0;3>Be;Be++)if(Math.abs(ke-pe[Be])>=ke/2)return!1;return!0},this.crossCheckVertical=function(pe,ke,we,Be){var Se=this.image,Pe=ae.height,ye=this.crossCheckStateCount;ye[0]=0,ye[1]=0,ye[2]=0;for(var Ee=pe;0<=Ee&&Se[ke+Ee*ae.width]&&ye[1]<=we;)ye[1]++,Ee--;if(0>Ee||ye[1]>we)return NaN;for(;0<=Ee&&!Se[ke+Ee*ae.width]&&ye[0]<=we;)ye[0]++,Ee--;if(ye[0]>we)return NaN;for(Ee=pe+1;Ee<Pe&&Se[ke+Ee*ae.width]&&ye[1]<=we;)ye[1]++,Ee++;if(Ee==Pe||ye[1]>we)return NaN;for(;Ee<Pe&&!Se[ke+Ee*ae.width]&&ye[2]<=we;)ye[2]++,Ee++;if(ye[2]>we)return NaN;var xe=ye[0]+ye[1]+ye[2];return 5*Math.abs(xe-Be)>=2*Be?NaN:this.foundPatternCross(ye)?this.centerFromEnd(ye,Ee):NaN},this.handlePossibleCenter=function(pe,ke,we){var Be=pe[0]+pe[1]+pe[2],Se=this.centerFromEnd(pe,we),Pe=this.crossCheckVertical(ke,Math.floor(Se),2*pe[1],Be);if(!isNaN(Pe)){for(var Me,ye=(pe[0]+pe[1]+pe[2])/3,Ee=this.possibleCenters.length,xe=0;xe<Ee;xe++)if(Me=this.possibleCenters[xe],Me.aboutEquals(ye,Pe,Se))return new V(Se,Pe,ye);var De=new V(Se,Pe,ye);this.possibleCenters.push(De),null!=this.resultPointCallback&&this.resultPointCallback.foundPossibleResultPoint(De)}return null},this.find=function(){for(var ye,pe=this.startX,ke=this.height,we=pe+ge,Se=[0,0,0],Pe=0;Pe<ke;Pe++){ye=he+(ke>>1)+(0==(1&Pe)?Pe+1>>1:-(Pe+1>>1)),Se[0]=0,Se[1]=0,Se[2]=0;for(var Ee=pe;Ee<we&&!fe[Ee+ae.width*ye];)Ee++;for(var xe=0;Ee<we;){if(!fe[Ee+ye*ae.width])1==xe&&xe++,Se[xe]++;else if(1==xe)Se[xe]++;else if(2==xe){if(this.foundPatternCross(Se)){var Me=this.handlePossibleCenter(Se,ye,Ee);if(null!=Me)return Me}Se[0]=Se[2],Se[1]=1,Se[2]=0,xe=1}else Se[++xe]++;Ee++}if(this.foundPatternCross(Se)){var Me=this.handlePossibleCenter(Se,ye,we);if(null!=Me)return Me}}if(0!=this.possibleCenters.length)return this.possibleCenters[0];throw"Couldn't find enough alignment patterns"}}function X(fe,ue,he){this.blockPointer=0,this.bitPointer=7,this.dataLength=0,this.blocks=fe,this.numErrorCorrectionCode=he,9>=ue?this.dataLengthMode=0:10<=ue&&26>=ue?this.dataLengthMode=1:27<=ue&&40>=ue&&(this.dataLengthMode=2),this.getNextBits=function(ge){var me=0;if(ge<this.bitPointer+1){for(var be=0,Ce=0;Ce<ge;Ce++)be+=1<<Ce;return be<<=this.bitPointer-ge+1,me=(this.blocks[this.blockPointer]&be)>>this.bitPointer-ge+1,this.bitPointer-=ge,me}if(ge<this.bitPointer+1+8){for(var pe=0,Ce=0;Ce<this.bitPointer+1;Ce++)pe+=1<<Ce;return me=(this.blocks[this.blockPointer]&pe)<<ge-(this.bitPointer+1),this.blockPointer++,me+=this.blocks[this.blockPointer]>>8-(ge-(this.bitPointer+1)),this.bitPointer-=ge%8,0>this.bitPointer&&(this.bitPointer=8+this.bitPointer),me}if(ge<this.bitPointer+1+16){for(var pe=0,ke=0,Ce=0;Ce<this.bitPointer+1;Ce++)pe+=1<<Ce;var we=(this.blocks[this.blockPointer]&pe)<<ge-(this.bitPointer+1);this.blockPointer++;var Be=this.blocks[this.blockPointer]<<ge-(this.bitPointer+1+8);this.blockPointer++;for(var Ce=0;Ce<ge-(this.bitPointer+1+8);Ce++)ke+=1<<Ce;ke<<=8-(ge-(this.bitPointer+1+8));var Se=(this.blocks[this.blockPointer]&ke)>>8-(ge-(this.bitPointer+1+8));return me=we+Be+Se,this.bitPointer-=(ge-8)%8,0>this.bitPointer&&(this.bitPointer=8+this.bitPointer),me}return 0},this.NextMode=function(){return this.blockPointer>this.blocks.length-this.numErrorCorrectionCode-2?0:this.getNextBits(4)},this.getDataLength=function(ge){for(var me=0;!0&&!(1==ge>>me);)me++;return this.getNextBits(ae.sizeOfDataLengthInfo[this.dataLengthMode][me])},this.getRomanAndFigureString=function(ge){var me=ge,be=0,Ce="",pe=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];do if(1<me){be=this.getNextBits(11);var ke=Math.floor(be/45),we=be%45;Ce+=pe[ke],Ce+=pe[we],me-=2}else 1==me&&(be=this.getNextBits(6),Ce+=pe[be],me-=1);while(0<me);return Ce},this.getFigureString=function(ge){var me=ge,be=0,Ce="";do 3<=me?(be=this.getNextBits(10),100>be&&(Ce+="0"),10>be&&(Ce+="0"),me-=3):2==me?(be=this.getNextBits(7),10>be&&(Ce+="0"),me-=2):1==me&&(be=this.getNextBits(4),me-=1),Ce+=be;while(0<me);return Ce},this.get8bitByteArray=function(ge){var me=ge,be=0,Ce=[];do be=this.getNextBits(8),Ce.push(be),me--;while(0<me);return Ce},this.getKanjiString=function(ge){var me=ge,be=0,Ce="";do{be=this.getNextBits(13);var pe=be%192,ke=be/192,we=(ke<<8)+pe,Be=0;Be=40956>=we+33088?we+33088:we+49472,Ce+=String.fromCharCode(Be),me--}while(0<me);return Ce},this.parseECIValue=function(){var ge=0,me=this.getNextBits(8);if(0==(128&me)&&(ge=127&me),128==(192&me)){var be=this.getNextBits(8);ge=(63&me)<<8|be}if(192==(224&me)){var Ce=this.getNextBits(8);ge=(31&me)<<16|Ce}return ge},this.__defineGetter__("DataByte",function(){var ge=[],me=1,be=2,Ce=4,pe=7,ke=8;do{var we=this.NextMode();if(0==we)if(0<ge.length)break;else throw"Empty data block";if(we!=me&&we!=be&&we!=Ce&&we!=ke&&we!=pe)throw"Invalid mode: "+we+" in (block:"+this.blockPointer+" bit:"+this.bitPointer+")";if(we==pe)var Be=this.parseECIValue();else{var Se=this.getDataLength(we);if(1>Se)throw"Invalid data length: "+Se;switch(we){case me:for(var Pe=this.getFigureString(Se),ye=Array(Pe.length),Ee=0;Ee<Pe.length;Ee++)ye[Ee]=Pe.charCodeAt(Ee);ge.push(ye);break;case be:for(var Pe=this.getRomanAndFigureString(Se),ye=Array(Pe.length),Ee=0;Ee<Pe.length;Ee++)ye[Ee]=Pe.charCodeAt(Ee);ge.push(ye);break;case Ce:var Be=this.get8bitByteArray(Se);ge.push(Be);break;case ke:var Pe=this.getKanjiString(Se);ge.push(Pe);}}}while(!0);return ge})}var ce=function(){function fe(){_classCallCheck(this,fe)}return _createClass(fe,null,[{key:"calculateRequiredBufferSize",value:function calculateRequiredBufferSize(ue,he){var _Binarizer$_calculate=fe._calculateBlockSize(ue,he),_Binarizer$_calculate2=_slicedToArray(_Binarizer$_calculate,3),ge=_Binarizer$_calculate2[1],me=_Binarizer$_calculate2[2];return ge*me}},{key:"_calculateBlockSize",value:function _calculateBlockSize(ue,he){var ge=Math.max(Math.floor(Math.min(ue,he)/fe.TARGET_BLOCK_COUNT_ALONG_SHORTER_SIDE),fe.MIN_BLOCK_SIZE),me=Math.ceil(ue/ge),be=Math.ceil(he/ge);return[ge,me,be]}},{key:"binarize",value:function binarize(ue,he,ge){var pe=3<arguments.length&&void 0!==arguments[3]?arguments[3]:ue,ke=4<arguments.length&&void 0!==arguments[4]?arguments[4]:null,_Binarizer$_calculate3=fe._calculateBlockSize(he,ge),_Binarizer$_calculate4=_slicedToArray(_Binarizer$_calculate3,3),me=_Binarizer$_calculate4[0],be=_Binarizer$_calculate4[1],Ce=_Binarizer$_calculate4[2],we=void 0;if(ke){if(!(ke instanceof Uint8ClampedArray)||ke.byteLength!==be*Ce)throw Error("Illegal Buffer.");we=ke}else we=new Uint8ClampedArray(be*Ce);for(var Be=0;Be<Ce;++Be)for(var Pe,Se=0;Se<be;++Se)Pe=fe._calculateBlockThreshold(ue,he,ge,Se,Be,be,me,we),we[Be*be+Se]=Pe;for(var ye=0;ye<Ce;++ye)for(var xe,Ee=0;Ee<be;++Ee){xe=0;for(var Me=-2;2>=Me;++Me)for(var De=-2;2>=De;++De){var Ie=Math.max(0,Math.min(be-1,Ee+Me)),Fe=Math.max(0,Math.min(Ce-1,ye+De));xe+=we[Fe*be+Ie]}fe._applyThresholdToBlock(ue,he,ge,Ee,ye,me,xe/25,pe)}}},{key:"_calculateBlockThreshold",value:function _calculateBlockThreshold(ue,he,ge,me,be,Ce,pe,ke){for(var we=255,Be=0,Se=Math.min(me*pe,he-pe),Pe=Math.min(be*pe,ge-pe),ye=Pe*he+Se,Ee=0;Ee<pe;++Ee){for(var Me,xe=0;xe<pe;++xe)Me=ue[ye+xe],Me<we&&(we=Me),Me>Be&&(Be=Me);ye+=he}if(Be-we>fe.MIN_DYNAMIC_RANGE)return(we+Be)/2;if(0===me||0===be)return we/2;var De=be*Ce+me,Ie=ke[De-1],Fe=ke[De-Ce],Ne=Ce[De-Ce-1],Re=(Ie+Fe+Ne)/3;return Re>we?Re:we/2}},{key:"_applyThresholdToBlock",value:function _applyThresholdToBlock(ue,he,ge,me,be,Ce,pe){for(var ke=7<arguments.length&&void 0!==arguments[7]?arguments[7]:ue,we=Math.min(me*Ce,he-Ce),Be=Math.min(be*Ce,ge-Ce),Se=Be*he+we,Pe=0;Pe<Ce;++Pe){for(var Ee,ye=0;ye<Ce;++ye)Ee=Se+ye,ke[Ee]=ue[Ee]<=pe;Se+=he}}}]),fe}();ce.TARGET_BLOCK_COUNT_ALONG_SHORTER_SIDE=40,ce.MIN_BLOCK_SIZE=16,ce.MIN_DYNAMIC_RANGE=24;var Z={};Z.checkAndNudgePoints=function(fe,ue){for(var he=ae.width,ge=ae.height,me=!0,be=0;be<ue.length&&me;be+=2){var Ce=Math.floor(ue[be]),pe=Math.floor(ue[be+1]);if(-1>Ce||Ce>he||-1>pe||pe>ge)throw"Error.checkAndNudgePoints ";me=!1,-1==Ce?(ue[be]=0,me=!0):Ce==he&&(ue[be]=he-1,me=!0),-1==pe?(ue[be+1]=0,me=!0):pe==ge&&(ue[be+1]=ge-1,me=!0)}me=!0;for(var be=ue.length-2;0<=be&&me;be-=2){var Ce=Math.floor(ue[be]),pe=Math.floor(ue[be+1]);if(-1>Ce||Ce>he||-1>pe||pe>ge)throw"Error.checkAndNudgePoints ";me=!1,-1==Ce?(ue[be]=0,me=!0):Ce==he&&(ue[be]=he-1,me=!0),-1==pe?(ue[be+1]=0,me=!0):pe==ge&&(ue[be+1]=ge-1,me=!0)}},Z.sampleGrid3=function(fe,ue,he){for(var ge=new C(ue),me=Array(ue<<1),be=0;be<ue;be++){for(var Ce=me.length,pe=be+0.5,ke=0;ke<Ce;ke+=2)me[ke]=(ke>>1)+0.5,me[ke+1]=pe;he.transformPoints1(me),Z.checkAndNudgePoints(fe,me);try{for(var we,ke=0;ke<Ce;ke+=2)we=fe[Math.floor(me[ke])+ae.width*Math.floor(me[ke+1])],we&&ge.set_Renamed(ke>>1,be)}catch(Be){throw"Error.checkAndNudgePoints"}}return ge},Z.sampleGridx=function(fe,ue,he,ge,me,be,Ce,pe,ke,we,Be,Se,Pe,ye,Ee,xe,Me,De){var Ie=u.quadrilateralToQuadrilateral(he,ge,me,be,Ce,pe,ke,we,Be,Se,Pe,ye,Ee,xe,Me,De);return Z.sampleGrid3(fe,ue,Ie)},c.VERSION_DECODE_INFO=[31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017],c.VERSIONS=function(){return[new c(1,[],new l(7,new d(1,19)),new l(10,new d(1,16)),new l(13,new d(1,13)),new l(17,new d(1,9))),new c(2,[6,18],new l(10,new d(1,34)),new l(16,new d(1,28)),new l(22,new d(1,22)),new l(28,new d(1,16))),new c(3,[6,22],new l(15,new d(1,55)),new l(26,new d(1,44)),new l(18,new d(2,17)),new l(22,new d(2,13))),new c(4,[6,26],new l(20,new d(1,80)),new l(18,new d(2,32)),new l(26,new d(2,24)),new l(16,new d(4,9))),new c(5,[6,30],new l(26,new d(1,108)),new l(24,new d(2,43)),new l(18,new d(2,15),new d(2,16)),new l(22,new d(2,11),new d(2,12))),new c(6,[6,34],new l(18,new d(2,68)),new l(16,new d(4,27)),new l(24,new d(4,19)),new l(28,new d(4,15))),new c(7,[6,22,38],new l(20,new d(2,78)),new l(18,new d(4,31)),new l(18,new d(2,14),new d(4,15)),new l(26,new d(4,13),new d(1,14))),new c(8,[6,24,42],new l(24,new d(2,97)),new l(22,new d(2,38),new d(2,39)),new l(22,new d(4,18),new d(2,19)),new l(26,new d(4,14),new d(2,15))),new c(9,[6,26,46],new l(30,new d(2,116)),new l(22,new d(3,36),new d(2,37)),new l(20,new d(4,16),new d(4,17)),new l(24,new d(4,12),new d(4,13))),new c(10,[6,28,50],new l(18,new d(2,68),new d(2,69)),new l(26,new d(4,43),new d(1,44)),new l(24,new d(6,19),new d(2,20)),new l(28,new d(6,15),new d(2,16))),new c(11,[6,30,54],new l(20,new d(4,81)),new l(30,new d(1,50),new d(4,51)),new l(28,new d(4,22),new d(4,23)),new l(24,new d(3,12),new d(8,13))),new c(12,[6,32,58],new l(24,new d(2,92),new d(2,93)),new l(22,new d(6,36),new d(2,37)),new l(26,new d(4,20),new d(6,21)),new l(28,new d(7,14),new d(4,15))),new c(13,[6,34,62],new l(26,new d(4,107)),new l(22,new d(8,37),new d(1,38)),new l(24,new d(8,20),new d(4,21)),new l(22,new d(12,11),new d(4,12))),new c(14,[6,26,46,66],new l(30,new d(3,115),new d(1,116)),new l(24,new d(4,40),new d(5,41)),new l(20,new d(11,16),new d(5,17)),new l(24,new d(11,12),new d(5,13))),new c(15,[6,26,48,70],new l(22,new d(5,87),new d(1,88)),new l(24,new d(5,41),new d(5,42)),new l(30,new d(5,24),new d(7,25)),new l(24,new d(11,12),new d(7,13))),new c(16,[6,26,50,74],new l(24,new d(5,98),new d(1,99)),new l(28,new d(7,45),new d(3,46)),new l(24,new d(15,19),new d(2,20)),new l(30,new d(3,15),new d(13,16))),new c(17,[6,30,54,78],new l(28,new d(1,107),new d(5,108)),new l(28,new d(10,46),new d(1,47)),new l(28,new d(1,22),new d(15,23)),new l(28,new d(2,14),new d(17,15))),new c(18,[6,30,56,82],new l(30,new d(5,120),new d(1,121)),new l(26,new d(9,43),new d(4,44)),new l(28,new d(17,22),new d(1,23)),new l(28,new d(2,14),new d(19,15))),new c(19,[6,30,58,86],new l(28,new d(3,113),new d(4,114)),new l(26,new d(3,44),new d(11,45)),new l(26,new d(17,21),new d(4,22)),new l(26,new d(9,13),new d(16,14))),new c(20,[6,34,62,90],new l(28,new d(3,107),new d(5,108)),new l(26,new d(3,41),new d(13,42)),new l(30,new d(15,24),new d(5,25)),new l(28,new d(15,15),new d(10,16))),new c(21,[6,28,50,72,94],new l(28,new d(4,116),new d(4,117)),new l(26,new d(17,42)),new l(28,new d(17,22),new d(6,23)),new l(30,new d(19,16),new d(6,17))),new c(22,[6,26,50,74,98],new l(28,new d(2,111),new d(7,112)),new l(28,new d(17,46)),new l(30,new d(7,24),new d(16,25)),new l(24,new d(34,13))),new c(23,[6,30,54,74,102],new l(30,new d(4,121),new d(5,122)),new l(28,new d(4,47),new d(14,48)),new l(30,new d(11,24),new d(14,25)),new l(30,new d(16,15),new d(14,16))),new c(24,[6,28,54,80,106],new l(30,new d(6,117),new d(4,118)),new l(28,new d(6,45),new d(14,46)),new l(30,new d(11,24),new d(16,25)),new l(30,new d(30,16),new d(2,17))),new c(25,[6,32,58,84,110],new l(26,new d(8,106),new d(4,107)),new l(28,new d(8,47),new d(13,48)),new l(30,new d(7,24),new d(22,25)),new l(30,new d(22,15),new d(13,16))),new c(26,[6,30,58,86,114],new l(28,new d(10,114),new d(2,115)),new l(28,new d(19,46),new d(4,47)),new l(28,new d(28,22),new d(6,23)),new l(30,new d(33,16),new d(4,17))),new c(27,[6,34,62,90,118],new l(30,new d(8,122),new d(4,123)),new l(28,new d(22,45),new d(3,46)),new l(30,new d(8,23),new d(26,24)),new l(30,new d(12,15),new d(28,16))),new c(28,[6,26,50,74,98,122],new l(30,new d(3,117),new d(10,118)),new l(28,new d(3,45),new d(23,46)),new l(30,new d(4,24),new d(31,25)),new l(30,new d(11,15),new d(31,16))),new c(29,[6,30,54,78,102,126],new l(30,new d(7,116),new d(7,117)),new l(28,new d(21,45),new d(7,46)),new l(30,new d(1,23),new d(37,24)),new l(30,new d(19,15),new d(26,16))),new c(30,[6,26,52,78,104,130],new l(30,new d(5,115),new d(10,116)),new l(28,new d(19,47),new d(10,48)),new l(30,new d(15,24),new d(25,25)),new l(30,new d(23,15),new d(25,16))),new c(31,[6,30,56,82,108,134],new l(30,new d(13,115),new d(3,116)),new l(28,new d(2,46),new d(29,47)),new l(30,new d(42,24),new d(1,25)),new l(30,new d(23,15),new d(28,16))),new c(32,[6,34,60,86,112,138],new l(30,new d(17,115)),new l(28,new d(10,46),new d(23,47)),new l(30,new d(10,24),new d(35,25)),new l(30,new d(19,15),new d(35,16))),new c(33,[6,30,58,86,114,142],new l(30,new d(17,115),new d(1,116)),new l(28,new d(14,46),new d(21,47)),new l(30,new d(29,24),new d(19,25)),new l(30,new d(11,15),new d(46,16))),new c(34,[6,34,62,90,118,146],new l(30,new d(13,115),new d(6,116)),new l(28,new d(14,46),new d(23,47)),new l(30,new d(44,24),new d(7,25)),new l(30,new d(59,16),new d(1,17))),new c(35,[6,30,54,78,102,126,150],new l(30,new d(12,121),new d(7,122)),new l(28,new d(12,47),new d(26,48)),new l(30,new d(39,24),new d(14,25)),new l(30,new d(22,15),new d(41,16))),new c(36,[6,24,50,76,102,128,154],new l(30,new d(6,121),new d(14,122)),new l(28,new d(6,47),new d(34,48)),new l(30,new d(46,24),new d(10,25)),new l(30,new d(2,15),new d(64,16))),new c(37,[6,28,54,80,106,132,158],new l(30,new d(17,122),new d(4,123)),new l(28,new d(29,46),new d(14,47)),new l(30,new d(49,24),new d(10,25)),new l(30,new d(24,15),new d(46,16))),new c(38,[6,32,58,84,110,136,162],new l(30,new d(4,122),new d(18,123)),new l(28,new d(13,46),new d(32,47)),new l(30,new d(48,24),new d(14,25)),new l(30,new d(42,15),new d(32,16))),new c(39,[6,26,54,82,110,138,166],new l(30,new d(20,117),new d(4,118)),new l(28,new d(40,47),new d(7,48)),new l(30,new d(43,24),new d(22,25)),new l(30,new d(10,15),new d(67,16))),new c(40,[6,30,58,86,114,142,170],new l(30,new d(19,118),new d(6,119)),new l(28,new d(18,47),new d(31,48)),new l(30,new d(34,24),new d(34,25)),new l(30,new d(20,15),new d(61,16)))]}(),c.getVersionForNumber=function(fe){if(1>fe||40<fe)throw"ArgumentException";return c.VERSIONS[fe-1]},c.getProvisionalVersionForDimension=function(fe){if(1!=fe%4)throw"Error getProvisionalVersionForDimension";try{return c.getVersionForNumber(fe-17>>2)}catch(ue){throw"Error getVersionForNumber"}},c.decodeVersionInformation=function(fe){for(var me,ue=4294967295,he=0,ge=0;ge<c.VERSION_DECODE_INFO.length;ge++){if(me=c.VERSION_DECODE_INFO[ge],me==fe)return this.getVersionForNumber(ge+7);var be=m.numBitsDiffering(fe,me);be<ue&&(he=ge+7,ue=be)}return 3>=ue?this.getVersionForNumber(he):null},u.quadrilateralToQuadrilateral=function(fe,ue,he,ge,me,be,Ce,pe,ke,we,Be,Se,Pe,ye,Ee,xe){var Me=this.quadrilateralToSquare(fe,ue,he,ge,me,be,Ce,pe),De=this.squareToQuadrilateral(ke,we,Be,Se,Pe,ye,Ee,xe);return De.times(Me)},u.squareToQuadrilateral=function(fe,ue,he,ge,me,be,Ce,pe){var ke=pe-be,we=ue-ge+be-pe;if(0==ke&&0==we)return new u(he-fe,me-he,fe,ge-ue,be-ge,ue,0,0,1);var Be=he-me,Se=Ce-me,Pe=fe-he+me-Ce,ye=ge-be,Ee=Be*ke-Se*ye,xe=(Pe*ke-Se*we)/Ee,Me=(Be*we-Pe*ye)/Ee;return new u(he-fe+xe*he,Ce-fe+Me*Ce,fe,ge-ue+xe*ge,pe-ue+Me*pe,ue,xe,Me,1)},u.quadrilateralToSquare=function(fe,ue,he,ge,me,be,Ce,pe){return this.squareToQuadrilateral(fe,ue,he,ge,me,be,Ce,pe).buildAdjoint()};var K=[[21522,0],[20773,1],[24188,2],[23371,3],[17913,4],[16590,5],[20375,6],[19104,7],[30660,8],[29427,9],[32170,10],[30877,11],[26159,12],[25368,13],[27713,14],[26998,15],[5769,16],[5054,17],[7399,18],[6608,19],[1890,20],[597,21],[3340,22],[2107,23],[13663,24],[12392,25],[16177,26],[14854,27],[9396,28],[8579,29],[11994,30],[11245,31]],U=[0,1,1,2,1,2,2,3,1,2,2,3,2,3,3,4];m.numBitsDiffering=function(fe,ue){return fe^=ue,U[15&fe]+U[15&O(fe,4)]+U[15&O(fe,8)]+U[15&O(fe,12)]+U[15&O(fe,16)]+U[15&O(fe,20)]+U[15&O(fe,24)]+U[15&O(fe,28)]},m.decodeFormatInformation=function(fe){var ue=m.doDecodeFormatInformation(fe);return null==ue?m.doDecodeFormatInformation(fe^21522):ue},m.doDecodeFormatInformation=function(fe){for(var ue=4294967295,he=0,ge=0;ge<K.length;ge++){var me=K[ge],be=me[0];if(be==fe)return new m(me[1]);var Ce=this.numBitsDiffering(fe,be);Ce<ue&&(he=me[1],ue=Ce)}return 3>=ue?new m(he):null},_.forBits=function(fe){if(0>fe||fe>=ie.length)throw"ArgumentException";return ie[fe]};var J=new _(0,1,"L"),$=new _(1,0,"M"),ee=new _(2,3,"Q"),te=new _(3,2,"H"),ie=[$,J,te,ee];p.getDataBlocks=function(fe,ue,he){if(fe.length!=ue.TotalCodewords)throw"ArgumentException";for(var ge=ue.getECBlocksForLevel(he),me=0,be=ge.getECBlocks(),Ce=0;Ce<be.length;Ce++)me+=be[Ce].Count;for(var Be,pe=Array(me),ke=0,we=0;we<be.length;we++){Be=be[we];for(var Ce=0;Ce<Be.Count;Ce++){var Se=Be.DataCodewords,Pe=ge.ECCodewordsPerBlock+Se;pe[ke++]=new p(Se,Array(Pe))}}for(var xe,ye=pe[0].codewords.length,Ee=pe.length-1;0<=Ee&&(xe=pe[Ee].codewords.length,xe!=ye);)Ee--;Ee++;for(var Me=ye-ge.ECCodewordsPerBlock,De=0,Ce=0;Ce<Me;Ce++)for(var we=0;we<ke;we++)pe[we].codewords[Ce]=fe[De++];for(var we=Ee;we<ke;we++)pe[we].codewords[Me]=fe[De++];for(var Ie=pe[0].codewords.length,Ce=Me;Ce<Ie;Ce++)for(var Fe,we=0;we<ke;we++)Fe=we<Ee?Ce:Ce+1,pe[we].codewords[Fe]=fe[De++];return pe};var oe={};oe.forReference=function(fe){if(0>fe||7<fe)throw"System.ArgumentException";return oe.DATA_MASKS[fe]},oe.DATA_MASKS=[new function(){this.unmaskBitMatrix=function(fe,ue){for(var he=0;he<ue;he++)for(var ge=0;ge<ue;ge++)this.isMasked(he,ge)&&fe.flip(ge,he)},this.isMasked=function(fe,ue){return 0==(1&fe+ue)}},new function(){this.unmaskBitMatrix=function(fe,ue){for(var he=0;he<ue;he++)for(var ge=0;ge<ue;ge++)this.isMasked(he,ge)&&fe.flip(ge,he)},this.isMasked=function(fe){return 0==(1&fe)}},new function(){this.unmaskBitMatrix=function(fe,ue){for(var he=0;he<ue;he++)for(var ge=0;ge<ue;ge++)this.isMasked(he,ge)&&fe.flip(ge,he)},this.isMasked=function(fe,ue){return 0==ue%3}},new function(){this.unmaskBitMatrix=function(fe,ue){for(var he=0;he<ue;he++)for(var ge=0;ge<ue;ge++)this.isMasked(he,ge)&&fe.flip(ge,he)},this.isMasked=function(fe,ue){return 0==(fe+ue)%3}},new function(){this.unmaskBitMatrix=function(fe,ue){for(var he=0;he<ue;he++)for(var ge=0;ge<ue;ge++)this.isMasked(he,ge)&&fe.flip(ge,he)},this.isMasked=function(fe,ue){return 0==(1&O(fe,1)+ue/3)}},new function(){this.unmaskBitMatrix=function(fe,ue){for(var he=0;he<ue;he++)for(var ge=0;ge<ue;ge++)this.isMasked(he,ge)&&fe.flip(ge,he)},this.isMasked=function(fe,ue){var he=fe*ue;return 0==(1&he)+he%3}},new function(){this.unmaskBitMatrix=function(fe,ue){for(var he=0;he<ue;he++)for(var ge=0;ge<ue;ge++)this.isMasked(he,ge)&&fe.flip(ge,he)},this.isMasked=function(fe,ue){var he=fe*ue;return 0==(1&(1&he)+he%3)}},new function(){this.unmaskBitMatrix=function(fe,ue){for(var he=0;he<ue;he++)for(var ge=0;ge<ue;ge++)this.isMasked(he,ge)&&fe.flip(ge,he)},this.isMasked=function(fe,ue){return 0==(1&(1&fe+ue)+fe*ue%3)}}],A.QR_CODE_FIELD=new A(285),A.DATA_MATRIX_FIELD=new A(301),A.addOrSubtract=function(fe,ue){return fe^ue};var re={};re.rsDecoder=new function(fe){this.field=fe,this.decode=function(ue,he){for(var ge=new G(this.field,ue),me=Array(he),be=0;be<me.length;be++)me[be]=0;for(var ke,Ce=!1,pe=!0,be=0;be<he;be++)ke=ge.evaluateAt(this.field.exp(be)),me[me.length-1-be]=ke,0!=ke&&(pe=!1);if(!pe)for(var xe,we=new G(this.field,me),Be=this.runEuclideanAlgorithm(this.field.buildMonomial(he,1),we,he),Se=Be[0],Pe=Be[1],ye=this.findErrorLocations(Se),Ee=this.findErrorMagnitudes(Pe,ye,Ce),be=0;be<ye.length;be++){if(xe=ue.length-1-this.field.log(ye[be]),0>xe)throw"ReedSolomonException Bad error location";ue[xe]=A.addOrSubtract(ue[xe],Ee[be])}},this.runEuclideanAlgorithm=function(ue,he,ge){if(ue.Degree<he.Degree){var me=ue;ue=he,he=me}for(var be=ue,Ce=he,pe=this.field.One,ke=this.field.Zero,we=this.field.Zero,Be=this.field.One;Ce.Degree>=Math.floor(ge/2);){var Se=be,Pe=pe,ye=we;if(be=Ce,pe=ke,we=Be,be.Zero)throw"r_{i-1} was zero";Ce=Se;for(var Ee=this.field.Zero,xe=be.getCoefficient(be.Degree),Me=this.field.inverse(xe);Ce.Degree>=be.Degree&&!Ce.Zero;){var De=Ce.Degree-be.Degree,Ie=this.field.multiply(Ce.getCoefficient(Ce.Degree),Me);Ee=Ee.addOrSubtract(this.field.buildMonomial(De,Ie)),Ce=Ce.addOrSubtract(be.multiplyByMonomial(De,Ie))}ke=Ee.multiply1(pe).addOrSubtract(Pe),Be=Ee.multiply1(we).addOrSubtract(ye)}var Fe=Be.getCoefficient(0);if(0==Fe)throw"ReedSolomonException sigmaTilde(0) was zero";var Ne=this.field.inverse(Fe),Re=Be.multiply2(Ne),Ge=Ce.multiply2(Ne);return[Re,Ge]},this.findErrorLocations=function(ue){var he=ue.Degree;if(1==he)return Array(ue.getCoefficient(1));for(var ge=Array(he),me=0,be=1;256>be&&me<he;be++)0==ue.evaluateAt(be)&&(ge[me]=this.field.inverse(be),me++);if(me!=he)throw"Error locator degree does not match number of roots";return ge},this.findErrorMagnitudes=function(ue,he,ge){for(var me=he.length,be=Array(me),Ce=0;Ce<me;Ce++){for(var pe=this.field.inverse(he[Ce]),ke=1,we=0;we<me;we++)Ce!=we&&(ke=this.field.multiply(ke,A.addOrSubtract(1,this.field.multiply(he[we],pe))));be[Ce]=this.field.multiply(ue.evaluateAt(pe),this.field.inverse(ke)),ge&&(be[Ce]=this.field.multiply(be[Ce],pe))}return be}}(A.QR_CODE_FIELD),re.correctErrors=function(fe,ue){for(var he=fe.length,ge=Array(he),me=0;me<he;me++)ge[me]=255&fe[me];var be=fe.length-ue;try{re.rsDecoder.decode(ge,be)}catch(Ce){throw Ce}for(var me=0;me<ue;me++)fe[me]=ge[me]},re.decode=function(fe){for(var ue=new k(fe),he=ue.readVersion(),ge=ue.readFormatInformation().ErrorCorrectionLevel,me=ue.readCodewords(),be=p.getDataBlocks(me,he,ge),Ce=0,pe=0;pe<be.length;pe++)Ce+=be[pe].NumDataCodewords;for(var ke=Array(Ce),we=0,Be=0;Be<be.length;Be++){var Se=be[Be],Pe=Se.Codewords,ye=Se.NumDataCodewords;re.correctErrors(Pe,ye);for(var pe=0;pe<ye;pe++)ke[we++]=Pe[pe]}var Ee=new X(ke,he.VersionNumber,ge.Bits);return Ee};var ae={};ae.imagedata=null,ae.width=0,ae.height=0,ae.qrCodeSymbol=null,ae.debug=!1,ae.maxImgSize=1048576,ae.sizeOfDataLengthInfo=[[10,9,8,8],[12,11,16,10],[14,13,16,12]],ae.callback=null,ae.decode=function(fe){if(0==arguments.length){if(ae.canvas_qr2)var ue=ae.canvas_qr2,he=ae.qrcontext2;else var ue=document.getElementById("qr-canvas"),he=ue.getContext("2d");return ae.width=ue.width,ae.height=ue.height,ae.imagedata=he.getImageData(0,0,ae.width,ae.height),ae.result=ae.process(he),null!=ae.callback&&ae.callback(ae.result),ae.result}var ge=new Image;ge.crossOrigin="Anonymous",ge.onload=function(){var me=document.getElementById("out-canvas");if(null!=me){var be=me.getContext("2d");be.clearRect(0,0,320,240),be.drawImage(ge,0,0,320,240)}var Ce=document.createElement("canvas"),pe=Ce.getContext("2d"),ke=ge.height,we=ge.width;if(ge.width*ge.height>ae.maxImgSize){var Be=ge.width/ge.height;ke=Math.sqrt(ae.maxImgSize/Be),we=Be*ke}Ce.width=we,Ce.height=ke,pe.drawImage(ge,0,0,Ce.width,Ce.height),ae.width=Ce.width,ae.height=Ce.height;try{ae.imagedata=pe.getImageData(0,0,Ce.width,Ce.height)}catch(Se){return ae.result="Cross domain image reading not supported in your browser! Save it to your computer then drag and drop the file!",void(null!=ae.callback&&ae.callback(ae.result))}try{ae.result=ae.process(pe)}catch(Se){console.log(Se),ae.result="error decoding QR Code"}null!=ae.callback&&ae.callback(ae.result)},ge.onerror=function(){null!=ae.callback&&ae.callback("Failed to load the image")},ge.src=fe},ae.isUrl=function(fe){var ue=/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/;return ue.test(fe)},ae.decode_url=function(fe){var ue="";try{ue=escape(fe)}catch(ge){console.log(ge),ue=fe}var he="";try{he=decodeURIComponent(ue)}catch(ge){console.log(ge),he=ue}return he},ae.decode_utf8=function(fe){return ae.isUrl(fe)?ae.decode_url(fe):fe},ae.process=function(fe){var ue=ae.imagedata.data,he=0,ge=new Uint8ClampedArray(ue.buffer,he,ae.width*ae.height);he+=ae.width*ae.height;var me=new Uint8ClampedArray(ue.buffer,he,ae.width*ae.height);he+=ae.width*ae.height;var be=ce.calculateRequiredBufferSize(ae.width,ae.height),Ce=new Uint8ClampedArray(ue.buffer,he,be);ae.grayscale(ue,ae.width,ae.height,ge),ce.binarize(ge,ae.width,ae.height,me,Ce);var pe;if(ae.debug){pe=new ImageData(new Uint8ClampedArray(4*(ae.width*ae.height)),ae.width,ae.height);for(var ke=0;ke<ae.height;ke++)for(var we=0;we<ae.width;we++){var Be=4*we+4*(ke*ae.width),Se=me[ke*ae.width+we]?0:255;pe.data[Be]=Se,pe.data[Be+1]=Se,pe.data[Be+2]=Se,pe.data[Be+3]=255}fe.putImageData(pe,0,0)}var Pe=new g(me),ye=Pe.detect();if(ae.debug){for(var ke=0;ke<ye.bits.Height;ke++)for(var we=0;we<ye.bits.Width;we++){var Be=2*(4*we)+4*(2*ke*ae.width),Ee=ye.bits.get_Renamed(we,ke);pe.data[Be]=Ee?0:255,pe.data[Be+1]=Ee?0:255,pe.data[Be+2]=255}fe.putImageData(pe,0,0)}for(var xe=re.decode(ye.bits),Me=xe.DataByte,De="",Ie=0;Ie<Me.length;Ie++)for(var Fe=0;Fe<Me[Ie].length;Fe++)De+=String.fromCharCode(Me[Ie][Fe]);return ae.decode_utf8(De)},ae.getMiddleBrightnessPerArea=function(fe){for(var ue=4,he=Math.floor(ae.width/ue),ge=Math.floor(ae.height/ue),me=[,,,,],be=0;be<ue;be++){me[be]=[,,,,];for(var Ce=0;Ce<ue;Ce++)me[be][Ce]=[0,0]}for(var pe=0;pe<ue;pe++)for(var ke=0;ke<ue;ke++){me[ke][pe][0]=255;for(var we=0;we<ge;we++)for(var Se,Be=0;Be<he;Be++)Se=fe[he*ke+Be+(ge*pe+we)*ae.width],Se<me[ke][pe][0]&&(me[ke][pe][0]=Se),Se>me[ke][pe][1]&&(me[ke][pe][1]=Se)}for(var Pe=[,,,,],ye=0;ye<ue;ye++)Pe[ye]=[,,,,];for(var pe=0;pe<ue;pe++)for(var ke=0;ke<ue;ke++)Pe[ke][pe]=Math.floor((me[ke][pe][0]+me[ke][pe][1])/2);return Pe},ae.grayScaleToBitmap=function(fe){for(var ue=ae.getMiddleBrightnessPerArea(fe),he=ue.length,ge=Math.floor(ae.width/he),me=Math.floor(ae.height/he),be=new ArrayBuffer(ae.width*ae.height),Ce=new Uint8Array(be),pe=0;pe<he;pe++)for(var ke=0;ke<he;ke++)for(var we=0;we<me;we++)for(var Be=0;Be<ge;Be++)Ce[ge*ke+Be+(me*pe+we)*ae.width]=!!(fe[ge*ke+Be+(me*pe+we)*ae.width]<ue[ke][pe]);return Ce},ae.grayscale=function(fe,ue,he,ge){for(var me=0;me<he;me++)for(var be=0;be<ue;be++){var Ce=me*ue+be,pe=4*Ce;ge[Ce]=77*fe[pe]+150*fe[pe+1]+29*fe[pe+2]+128>>8}},window.qrscanner=ae;var ne=3,de=8,le=2;ae.orderBestPatterns=function(fe){function ue(Be,Se){var Pe=Be.X-Se.X,ye=Be.Y-Se.Y;return Math.sqrt(Pe*Pe+ye*ye)}var Ce,pe,ke,ge=ue(fe[0],fe[1]),me=ue(fe[1],fe[2]),be=ue(fe[0],fe[2]);if(me>=ge&&me>=be?(pe=fe[0],Ce=fe[1],ke=fe[2]):be>=me&&be>=ge?(pe=fe[1],Ce=fe[0],ke=fe[2]):(pe=fe[2],Ce=fe[0],ke=fe[1]),0>function(Be,Se,Pe){var ye=Se.x,Ee=Se.y;return(Pe.x-ye)*(Be.y-Ee)-(Pe.y-Ee)*(Be.x-ye)}(Ce,pe,ke)){var we=Ce;Ce=ke,ke=we}fe[0]=Ce,fe[1]=pe,fe[2]=ke}})();